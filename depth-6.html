<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style/base/reset.css" />
    <link rel="stylesheet" href="style/default.css" />
    <style>
   
      .system-list {
        max-height: 1200px;
        overflow-y: auto;
      }
      .system-list .menu-head.depth-4,
      .menu-head.depth-5,
      .menu-head.depth-6,
      .menu-head.depth-7 {
        padding-top: 12px;
        padding-bottom: 12px;
      }
      .system-list .menu-head.depth-3 {
        padding: 1.5rem 1.2rem;
      }
      .system-list .menu-head.depth-4 {
        padding-left: 20px;
      }
      .system-list .menu-head.depth-5 {
        padding-left: 28px;
      }
      .system-list .menu-head.depth-6 {
        padding-left: 36px;
      }
      .system-list .menu-head.depth-7 {
        padding-left: 44px;
      }
      .system-list .list-span {
        font-size: 1.2rem;
        color: rgb(67, 55, 179);
        font-weight: 700;
      }
    </style>
    <!-- jquery 스와이퍼 cdn -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="sub depth-in" style="position: relative">
      <!-- 클래스 삽입 위치 -->
      <p style="color: rgb(255, 0, 0); position: absolute; top: 50%; left: 20%">
        <span>해당 html은 예시입니다. 다른 관리자 페이지에도 동일하게 적용 시켜놓았습니다.</span>
        <br />
        <span>- depth 6까지 제작</span>
        <br />
        <span>- 일정 높이 이상 커질 시 세로 스크롤 바 형성, 최 상위 depth ex(한국노동조합총연맹) 클릭 시 다른 depth 모두 비활성화</span>
      </p>
    </div>

    <div class="sub">
      <!-- 클래스 삽입 위치 -->
      <!-- 왼쪽 메뉴 트리 영역 -->
      <!-- 메뉴 권한 설정 아코디언 -->
      <!-- 메뉴 권한 설정 아코디언 -->
      <ul class="menu-list lnb-list system-list" data-action="accordion">
        <li class="home-li">
          <div class="menu-body depth-1-body">
            <div class="acco-in first-acco">
              <ul class="sub-ul">
                <li class="depth-1-li">
                  <div
                    class="menu-head depth-0"
                    style="border-bottom: 0.5rem solid #246beb"
                  >
                    <h3 class="tit">노동조합</h3>
                  </div>

                  <!-- depth를 추가하시려면 depth-()-li를 복사 붙여넣기 하시면 됩니다. -->
                  <!-- ex) 뎁스 6 추가 => depth-6-li 추가 -->

                  <div class="menu-body depth-1-body">
                    <div class="acco-in">
                      <ul class="sub-ul">
                        <!-- First depth-2-li -->
                        <li class="depth-2-li">
                          <div class="menu-head depth-2">
                            <span class="menu-title">한국노동조합총연맹</span>
                            <button
                              type="button"
                              class="btn btn-ico menu-btn"
                            ></button>
                          </div>
                          <div class="menu-body depth-3">
                            <ul class="sub-ul">
                              <li class="depth-3-li">
                                <div class="menu-head depth-3">
                                  <span class="menu-title"
                                    >&#9495; 공무원 노동조합 연맹</span
                                  >
                                  <button
                                    type="button"
                                    class="btn btn-ico menu-btn"
                                  ></button>
                                </div>
                                <div class="menu-body depth-4">
                                  <ul class="sub-ul">
                                    <li class="depth-4-li">
                                      <div class="menu-head depth-4">
                                        <span class="menu-title"
                                          >&#9495; XXX 공무원 노동조합</span
                                        >
                                        <button
                                          type="button"
                                          class="btn btn-ico menu-btn"
                                        ></button>
                                      </div>
                                      <div class="menu-body depth-5">
                                        <ul class="sub-ul">
                                          <li class="depth-5-li">
                                            <div class="menu-head depth-5">
                                              <span class="menu-title"
                                                >&#9495; XXX 공무원 노동조합
                                                지부</span
                                              >
                                              <button
                                                type="button"
                                                class="btn btn-ico menu-btn"
                                              ></button>
                                            </div>
                                            <div class="menu-body depth-6">
                                              <ul class="sub-ul">
                                                <li class="depth-6-li">
                                                  <div
                                                    class="menu-head depth-6"
                                                  >
                                                    <span class="menu-title"
                                                      >&#9495; XXX 공무원
                                                      노동조합 지회</span
                                                    >
                                                    <button
                                                      type="button"
                                                      class="btn btn-ico menu-btn"
                                                    ></button>
                                                  </div>
                                                  <div
                                                    class="menu-body depth-7"
                                                  >
                                                    <ul>
                                                      <li class="depth-7-li">
                                                        <div
                                                          class="menu-head depth-7"
                                                        >
                                                          <span
                                                            class="menu-title"
                                                            >&#9495; 공무원
                                                            노동조합 분회</span
                                                          >
                                                        </div>
                                                      </li>
                                                    </ul>
                                                  </div>
                                                </li>
                                              </ul>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </li>
                        <!-- 1 - depth-2 li end -->

                        <li class="depth-2-li">
                          <div class="menu-head depth-2">
                            <span class="menu-title">전국총연맹</span>
                            <button
                              type="button"
                              class="btn btn-ico menu-btn"
                            ></button>
                          </div>
                          <div class="menu-body depth-3">
                            <ul class="sub-ul">
                              <li class="depth-3-li">
                                <div class="menu-head depth-3">
                                  <span class="menu-title"
                                    >&#9495; 전국 노동조합 연맹</span
                                  >
                                  <button
                                    type="button"
                                    class="btn btn-ico menu-btn"
                                  ></button>
                                </div>
                                <div class="menu-body depth-4">
                                  <ul class="sub-ul">
                                    <li class="depth-4-li">
                                      <div class="menu-head depth-4">
                                        <span class="menu-title"
                                          >&#9495; 전국 공무원 노동조합</span
                                        >
                                        <button
                                          type="button"
                                          class="btn btn-ico menu-btn"
                                        ></button>
                                      </div>
                                      <div class="menu-body depth-5">
                                        <ul class="sub-ul">
                                          <li class="depth-5-li">
                                            <div class="menu-head depth-5">
                                              <span class="menu-title"
                                                >&#9495; 전국 공무원 노동조합
                                                지부</span
                                              >
                                              <button
                                                type="button"
                                                class="btn btn-ico menu-btn"
                                              ></button>
                                            </div>
                                            <div class="menu-body depth-6">
                                              <ul class="sub-ul">
                                                <li class="depth-6-li">
                                                  <div
                                                    class="menu-head depth-6"
                                                  >
                                                    <span class="menu-title"
                                                      >&#9495; 전국 공무원
                                                      노동조합 지회</span
                                                    >
                                                    <button
                                                      type="button"
                                                      class="btn btn-ico menu-btn"
                                                    ></button>
                                                  </div>
                                                  <div
                                                    class="menu-body depth-7"
                                                  >
                                                    <ul>
                                                      <li class="depth-7-li">
                                                        <div
                                                          class="menu-head depth-7"
                                                        >
                                                          <span
                                                            class="menu-title"
                                                            >&#9495; 전국
                                                            노동조합 분회</span
                                                          >
                                                        </div>
                                                      </li>
                                                    </ul>
                                                  </div>
                                                </li>
                                              </ul>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </li>

                        <!-- third depth-2-li -->

                        <li class="depth-2-li">
                          <div class="menu-head depth-2">
                            <span class="menu-title">경기총연맹</span>
                            <button
                              type="button"
                              class="btn btn-ico menu-btn"
                            ></button>
                          </div>
                          <div class="menu-body depth-3">
                            <ul class="sub-ul">
                              <li class="depth-3-li">
                                <div class="menu-head depth-3">
                                  <span class="menu-title"
                                    >&#9495; 경기 노동조합 연맹</span
                                  >
                                  <button
                                    type="button"
                                    class="btn btn-ico menu-btn"
                                  ></button>
                                </div>
                                <div class="menu-body depth-4">
                                  <ul class="sub-ul">
                                    <li class="depth-4-li">
                                      <div class="menu-head depth-4">
                                        <span class="menu-title"
                                          >&#9495; 경기 공무원 노동조합</span
                                        >
                                        <button
                                          type="button"
                                          class="btn btn-ico menu-btn"
                                        ></button>
                                      </div>
                                      <div class="menu-body depth-5">
                                        <ul class="sub-ul">
                                          <li class="depth-5-li">
                                            <div class="menu-head depth-5">
                                              <span class="menu-title"
                                                >&#9495; 경기 공무원 노동조합
                                                지부</span
                                              >
                                              <button
                                                type="button"
                                                class="btn btn-ico menu-btn"
                                              ></button>
                                            </div>
                                            <div class="menu-body depth-6">
                                              <ul class="sub-ul">
                                                <li class="depth-6-li">
                                                  <div
                                                    class="menu-head depth-6"
                                                  >
                                                    <span class="menu-title"
                                                      >&#9495; 경기 공무원
                                                      노동조합 지회</span
                                                    >
                                                    <button
                                                      type="button"
                                                      class="btn btn-ico menu-btn"
                                                    ></button>
                                                  </div>
                                                  <div
                                                    class="menu-body depth-7"
                                                  >
                                                    <ul>
                                                      <li class="depth-7-li">
                                                        <div
                                                          class="menu-head depth-7"
                                                        >
                                                          <span
                                                            class="menu-title"
                                                            >&#9495; 경기
                                                            노동조합 분회</span
                                                          >
                                                        </div>
                                                      </li>
                                                    </ul>
                                                  </div>
                                                </li>
                                              </ul>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                            </ul>
                          </div>
                        </li>

                        <li class="depth-2-li">
                          <div class="menu-head depth-2">
                            <span class="menu-title">미가입</span>
                            <button
                              type="button"
                              class="btn btn-ico menu-btn"
                            ></button>
                          </div>
                          <div class="menu-body depth-3">
                            <ul class="sub-ul">
                              <li class="depth-3-li">
                                <div class="menu-head depth-3">
                                  <span class="menu-title"
                                    >&#9495; 미가입 연맹 1</span
                                  >
                                </div>
                              </li>
                            </ul>
                          </div>
                        </li>

                        <li class="depth-2-li">
                          <div class="menu-head depth-2">
                            <span class="menu-title">미가입2</span>
                            <button
                              type="button"
                              class="btn btn-ico menu-btn"
                            ></button>
                          </div>
                          <div class="menu-body depth-3">
                            <ul class="sub-ul">
                              <li class="depth-3-li">
                                <div class="menu-head depth-3">
                                  <span class="menu-title"
                                    >&#9495; 미가입 연맹 2</span
                                  >
                                </div>
                              </li>
                            </ul>
                          </div>
                        </li>
                      </ul>
                    </div>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </li>
      </ul>

      <!-- 노동조합 체계 end -->
    </div>
  </body>
  <script>
    $(document).ready(function () {
      // depth-2 메뉴 클릭 시 스타일 적용 및 다른 메뉴 스타일 초기화
      $(".menu-head.depth-2").on("click", function () {
        const $this = $(this);
        const $currentBody = $this.next("menu-body");
        const isClosed = $currentBody.css("display") === "none";

        if (!isClosed) {
          resetSubMenuStyles($this);
        }

        $(this).css("border-bottom", "0.3rem solid #003675");
        $(".menu-head.depth-2")
          .not($(this))
          .css("border-bottom", "0.1rem solid #ddd");
      });

      // 메뉴의 클릭 이벤트 핸들러
      $(".menu-body .menu-head:not(.depth-0)").on("click", function () {
        const $currentBody = $(this).next(".menu-body");
        const isClosed = $currentBody.css("display") === "none";

        toggleMenuBody($currentBody, isClosed); // 클릭 시 body 오픈
        toggleMenuButton($(this), isClosed); // 클릭 시 버튼 이미지 변경

        if ($currentBody.length === 0 || !$(this).hasClass("depth-2")) {
          handleBackgroundColor($(this));
        }

        // 주석의 요구사항: depth-2인 경우 스타일 적용하고 열려있는 body가 있으면 닫기
        if ($(this).hasClass("depth-2")) {
          // closeOtherBodies($currentBody);
          handleBackgroundColor($(this));
        }
      });

      // .menu-body의 display 상태를 토글하는 함수 = 클릭되면 인수로 nextbody를 받아서 slide down up 해줌
      function toggleMenuBody($body, open) {
        if (open) {
          $body.slideDown();
        } else {
          $body.slideUp();
        }
      }

      function toggleMenuButton($menuHead, open) {
        const newBackground = open
          ? "url(img/arrow__top-blue.svg) no-repeat center"
          : "url(img/arrow__bottom-bk.svg) no-repeat center";

        $menuHead.find(".menu-btn").css("background", newBackground);
        if (!open) {
          $menuHead.css("border-bottom", "0.1rem solid #ddd");
        }
      }

      // 다른 메뉴의 배경색을 투명하게 변경하는 함수
      function handleBackgroundColor($menuHead) {
        if (!$menuHead.hasClass("depth-2")) {
          $menuHead.css("background-color", "#eee");
          $(".menu-body .menu-head")
            .not($menuHead)
            .css("background-color", "transparent");
        }
      }

      // 현재 열린 menu-body 이외의 다른 menu-body를 닫는 함수
      function closeOtherBodies($currentBody) {
        $(".menu-body").not($currentBody).slideUp();
        $(".menu-btn")
          .not($currentBody.prev(".menu-head").find(".menu-btn"))
          .css("background", "url(img/arrow__bottom-bk.png) no-repeat center");
      }
    });

    // 하위 메뉴 스타일 초기화 함수
    function resetSubMenuStyles($menuHead) {
      // 다음 menu body의 menu head를 찾아서 모두 비활성화
      $menuHead
        .next(".menu-body")
        .find(".menu-head")
        .each(function () {
          $(this).css({
            "background-color": "transparent",
            "border-bottom": "0.1rem solid #ddd",
          });
          $(this)
            .find(".menu-btn")
            .css(
              "background",
              "url(img/arrow__bottom-bk.png) no-repeat center"
            );
          $(this).next(".menu-body").slideUp();
        });
    }

    $(".menu-body:not(.depth-1-body)").slideUp();
    $('.menu-head input[type="checkbox"]').on("click", function (e) {
      e.stopPropagation();
    });
  </script>
</html>
