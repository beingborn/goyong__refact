<!-- 현재 자브스크립트 상 depth--1이 비활성화 되어있는데. 
     현재 depth 1에 해당 하는 영역을 0으로 바꾸고 나머지 li 및 body head등에 숫자를 1씩 줄인 후. 
     depth 0을 비활성화 하는 형식으로 진행할 것이다.
     그리고 해당 줄인 값에 맞게 css와 자바스크립트를 바꿔서 정상 작동하게 만든다..
-->


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="style/base/reset.css" />
    <link rel="stylesheet" href="style/default.css" />
    <style>

/* 초기 상태 안보이게 지정 */



   
      
      .system-list .list-span {font-size: 1.2rem; color: rgb(67, 55, 179); font-weight: 700;}
      
      .system-list .depth-1 {padding: 2.5rem 1rem; border-bottom: 0.1rem solid #ddd;}
      .system-list .depth-1 .tit {font-size: 2.1rem; font-weight: 700;}
      .system-list .depth-0 {border-bottom: 0.1rem solid #ddd; border-top: 0.1rem solid #ddd;font-size: 1.8rem; font-weight: 600; padding: 2.4rem 2rem 2.4rem 1rem; display: flex; justify-content: space-between; align-items: center;}
      
      .system-list {max-height: 1200px; overflow-y: auto;}
      .system-list .menu-head.depth-3, .menu-head.depth-4, .menu-head.depth-5, .menu-head.depth-6 {padding-top: 12px; padding-bottom: 12px;}
      .system-list .menu-head.depth-2 {padding: 1.5rem 1.2rem;}
      .system-list .menu-head.depth-3 {padding-left: 20px;}
      .system-list .menu-head.depth-4 {padding-left: 28px;}
      .system-list .menu-head.depth-5 {padding-left: 36px;}
      .system-list .menu-head.depth-6 {padding-left: 44px;}
      .system-list .list-span {font-size: 1.2rem; color: rgb(67, 55, 179); font-weight: 700;}
      
      /* 초기 상태 안보이게 지정 */
      .menu-body { display: block;}
      
      .menu-btn {
        width: 2rem;
        height: 2rem;
        background: url(../img/arrow__bottom-bk.svg) no-repeat center;
        position: absolute;
        right: 1.5rem;
        top: 50%;
        transform: translateY(-50%);
        background: url(img/arrow__bottom-bk.png) no-repeat center;
        border: none;
        cursor: pointer;
      }







    </style>
    <!-- jquery 스와이퍼 cdn -->
    <script
      src="https://code.jquery.com/jquery-3.7.1.min.js"
      integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="sub depth-in" style="position: relative">
      <!-- 클래스 삽입 위치 -->
      <p style="color: rgb(255, 0, 0); position: absolute; top: 50%; left: 20%">
        <span>해당 html은 예시입니다. 다른 관리자 페이지에도 동일하게 적용 시켜놓았습니다.</span>
        <br />
        <span>- depth 6까지 제작</span>
        <br />
        <span>- 일정 높이 이상 커질 시 세로 스크롤 바 형성, 최 상위 depth ex(한국노동조합총연맹) 클릭 시 다른 depth 모두 비활성화</span>
      </p>
    </div>

    <div class="sub">
        <ul class="menu-list lnb-list system-list" data-action="accordion">
            <li class="home-li">
              <div class="menu-body depth-0-body">
                <div class="acco-in first-acco">
                  <ul class="sub-ul">
                    <li class="depth-0-li">
                      <div class="menu-head depth-0" style="border-bottom: 0.5rem solid #246beb">
                        <h3 class="tit">노동조합</h3>
                      </div>  
                      <div class="menu-body depth-0-body">
                        <div class="acco-in">
                          <ul class="sub-ul">
                            <!-- depth- 1 -->
                            <li class="depth-1-li">
                              <div class="menu-head depth-1">
                                <span class="menu-title">한국노동조합총연맹</span>
                                <button type="button" class="btn btn-ico menu-btn"></button>
                              </div>
                              <div class="menu-body depth-2">
                                <ul class="sub-ul">
                                  <li class="depth-2-li">
                                    <div class="menu-head depth-2">
                                      <span class="menu-title">&#9495; 공무원 노동조합 연맹</span>
                                      <button type="button" class="btn btn-ico menu-btn"></button>
                                    </div>
                                    <div class="menu-body depth-3">
                                      <ul class="sub-ul">
                                        <li class="depth-3-li">
                                          <div class="menu-head depth-3">
                                            <span class="menu-title">&#9495; XXX 공무원 노동조합</span>
                                            <button type="button" class="btn btn-ico menu-btn"></button>
                                          </div>
                                          <div class="menu-body depth-4">
                                            <ul class="sub-ul">
                                              <li class="depth-4-li">
                                                <div class="menu-head depth-4">
                                                  <span class="menu-title">&#9495; XXX 공무원 노동조합 지부</span>
                                                  <button type="button" class="btn btn-ico menu-btn"></button>
                                                </div>
                                                <div class="menu-body depth-5">
                                                  <ul class="sub-ul">
                                                    <li class="depth-5-li">
                                                      <div class="menu-head depth-5">
                                                        <span class="menu-title">&#9495; XXX 공무원 노동조합 지회</span>
                                                        <button type="button" class="btn btn-ico menu-btn"></button>
                                                      </div>
                                                      <div class="menu-body depth-6">
                                                        <ul class="sub-ul">
                                                          <li class="depth-6-li">
                                                            <div class="menu-head depth-6">
                                                              <span class="menu-title">&#9495; 공무원 노동조합 분회</span>
                                                            </div>
                                                          </li>
                                                        </ul>
                                                      </div>
                                                    </li>
                                                  </ul>
                                                </div>
                                              </li>
                                            </ul>
                                          </div>
                                        </li>
                                      </ul>
                                    </div>
                                  </li>
                                </ul>
                              </div>
                            </li>
                            <!-- depth -1 -->


                            <li class="depth-1-li">
                                <div class="menu-head depth-1">
                                  <span class="menu-title">전국노동조합총연맹</span>
                                  <button type="button" class="btn btn-ico menu-btn"></button>
                                </div>
                                <div class="menu-body depth-2">
                                  <ul class="sub-ul">
                                    <li class="depth-2-li">
                                      <div class="menu-head depth-2">
                                        <span class="menu-title">&#9495; 전국 노동조합 연맹</span>
                                        <button type="button" class="btn btn-ico menu-btn"></button>
                                      </div>
                                      <div class="menu-body depth-3">
                                        <ul class="sub-ul">
                                          <li class="depth-3-li">
                                            <div class="menu-head depth-3">
                                              <span class="menu-title">&#9495; 전국 공무원 노동조합</span>
                                              <button type="button" class="btn btn-ico menu-btn"></button>
                                            </div>
                                            <div class="menu-body depth-4">
                                              <ul class="sub-ul">
                                                <li class="depth-4-li">
                                                  <div class="menu-head depth-4">
                                                    <span class="menu-title">&#9495; 전국 공무원 노동조합 지부</span>
                                                    <button type="button" class="btn btn-ico menu-btn"></button>
                                                  </div>
                                                  <div class="menu-body depth-5">
                                                    <ul class="sub-ul">
                                                      <li class="depth-5-li">
                                                        <div class="menu-head depth-5">
                                                          <span class="menu-title">&#9495; 전국 공무원 노동조합 지회</span>
                                                          <button type="button" class="btn btn-ico menu-btn"></button>
                                                        </div>
                                                        <div class="menu-body depth-6">
                                                          <ul class="sub-ul">
                                                            <li class="depth-6-li">
                                                              <div class="menu-head depth-6">
                                                                <span class="menu-title">&#9495; 전국 공무원 노동조합 분회</span>
                                                              </div>
                                                            </li>
                                                          </ul>
                                                        </div>
                                                      </li>
                                                    </ul>
                                                  </div>
                                                </li>
                                              </ul>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                              <!-- depth - 1- li -->

                              <li class="depth-1-li">
                                <div class="menu-head depth-1">
                                  <span class="menu-title">경기 노동조합총연맹</span>
                                  <button type="button" class="btn btn-ico menu-btn"></button>
                                </div>
                                <div class="menu-body depth-2">
                                  <ul class="sub-ul">
                                    <li class="depth-2-li">
                                      <div class="menu-head depth-2">
                                        <span class="menu-title">&#9495; 경기 노동조합 연맹</span>
                                        <button type="button" class="btn btn-ico menu-btn"></button>
                                      </div>
                                      <div class="menu-body depth-3">
                                        <ul class="sub-ul">
                                          <li class="depth-3-li">
                                            <div class="menu-head depth-3">
                                              <span class="menu-title">&#9495; 경기 공무원 노동조합</span>
                                              <button type="button" class="btn btn-ico menu-btn"></button>
                                            </div>
                                            <div class="menu-body depth-4">
                                              <ul class="sub-ul">
                                                <li class="depth-4-li">
                                                  <div class="menu-head depth-4">
                                                    <span class="menu-title">&#9495; 경기 공무원 노동조합 지부</span>
                                                    <button type="button" class="btn btn-ico menu-btn"></button>
                                                  </div>
                                                  <div class="menu-body depth-5">
                                                    <ul class="sub-ul">
                                                      <li class="depth-5-li">
                                                        <div class="menu-head depth-5">
                                                          <span class="menu-title">&#9495; 경기 공무원 노동조합 지회</span>
                                                          <button type="button" class="btn btn-ico menu-btn"></button>
                                                        </div>
                                                        <div class="menu-body depth-6">
                                                          <ul class="sub-ul">
                                                            <li class="depth-6-li">
                                                              <div class="menu-head depth-6">
                                                                <span class="menu-title">&#9495; 경기 공무원 노동조합 분회</span>
                                                              </div>
                                                            </li>
                                                          </ul>
                                                        </div>
                                                      </li>
                                                    </ul>
                                                  </div>
                                                </li>
                                              </ul>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                              <!-- li -->
                              <li class="depth-1-li">
                                <div class="menu-head depth-1">
                                  <span class="menu-title">노동조합</span>
                                  <button type="button" class="menu-btn"></button>
                                </div>
                                <div class="menu-body depth-2-body">
                                  <ul class="sub-ul">
                                    <li class="depth-2-li">
                                      <div class="menu-head depth-2">
                                        <span class="menu-title">&#9495; 공무원 노동조합 연맹</span>
                                        <button type="button" class="menu-btn"></button>
                                      </div>
                                      <div class="menu-body depth-3-body">
                                        <ul class="sub-ul">
                                          <li class="depth-3-li">
                                            <div class="menu-head depth-3">
                                              <span class="menu-title">&#9495; XXX 공무원 노동조합</span>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                              <!-- depth - 1 li -->
                              <li class="depth-1-li">
                                <div class="menu-head depth-1">
                                  <span class="menu-title">미가입</span>
                                  <button type="button" class="menu-btn"></button>
                                </div>
                                <div class="menu-body depth-2-body">
                                  <ul class="sub-ul">
                                    <li class="depth-2-li">
                                      <div class="menu-head depth-2">
                                        <span class="menu-title">&#9495; 미가입1</span>
                                        <button type="button" class="menu-btn"></button>
                                      </div>
                                      <div class="menu-body depth-3-body">
                                        <ul class="sub-ul">
                                          <li class="depth-3-li">
                                            <div class="menu-head depth-3">
                                              <span class="menu-title">&#9495; 미가입 2</span>
                                            </div>
                                          </li>
                                        </ul>
                                      </div>
                                    </li>
                                  </ul>
                                </div>
                              </li>
                          </ul>
                        </div>
                      </div>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>
      </div>
  </body>
  <script>
    $(document).ready(function () {
      // depth-2 메뉴 클릭 시 스타일 적용 및 다른 메뉴 스타일 초기화
      $(".menu-head.depth-1").on("click", function () {
        const $this = $(this);
        const $currentBody = $this.next("menu-body");
        const isClosed = $currentBody.css("display") === "none";

        if (!isClosed) {
          resetSubMenuStyles($this);
        }

        $(this).css("border-bottom", "0.3rem solid #003675");
        $(".menu-head.depth-1")
          .not($(this))
          .css("border-bottom", "0.1rem solid #ddd");
      });

      // 메뉴의 클릭 이벤트 핸들러
      $(".menu-body .menu-head:not(.depth-0)").on("click", function () {
        const $currentBody = $(this).next(".menu-body");
        const isClosed = $currentBody.css("display") === "none";

        toggleMenuBody($currentBody, isClosed); // 클릭 시 body 오픈
        toggleMenuButton($(this), isClosed); // 클릭 시 버튼 이미지 변경

        if ($currentBody.length === 0 || !$(this).hasClass("depth-2")) {
          handleBackgroundColor($(this));
        }

        // 주석의 요구사항: depth-2인 경우 스타일 적용하고 열려있는 body가 있으면 닫기
        if ($(this).hasClass("depth-1")) {
          // closeOtherBodies($currentBody);
          handleBackgroundColor($(this));
        }
      });

      // .menu-body의 display 상태를 토글하는 함수 = 클릭되면 인수로 nextbody를 받아서 slide down up 해줌
      function toggleMenuBody($body, open) {
        if (open) {
          $body.slideDown();
        } else {
          $body.slideUp();
        }
      }

      function toggleMenuButton($menuHead, open) {
        const newBackground = open
          ? "url(img/arrow__top-blue.svg) no-repeat center"
          : "url(img/arrow__bottom-bk.svg) no-repeat center";

        $menuHead.find(".menu-btn").css("background", newBackground);
        if (!open) {
          $menuHead.css("border-bottom", "0.1rem solid #ddd");
        }
      }

      // 다른 메뉴의 배경색을 투명하게 변경하는 함수
      function handleBackgroundColor($menuHead) {
        if (!$menuHead.hasClass("depth-1")) {
          $menuHead.css("background-color", "#eee");
          $(".menu-body .menu-head")
            .not($menuHead)
            .css("background-color", "transparent");
        }
      }

      // 현재 열린 menu-body 이외의 다른 menu-body를 닫는 함수
      function closeOtherBodies($currentBody) {
        $(".menu-body").not($currentBody).slideUp();
        $(".menu-btn")
          .not($currentBody.prev(".menu-head").find(".menu-btn"))
          .css("background", "url(img/arrow__bottom-bk.png) no-repeat center");
      }
    });

    // 하위 메뉴 스타일 초기화 함수
    function resetSubMenuStyles($menuHead) {
      // 다음 menu body의 menu head를 찾아서 모두 비활성화
      $menuHead
        .next(".menu-body")
        .find(".menu-head")
        .each(function () {
          $(this).css({
            "background-color": "transparent",
            "border-bottom": "0.1rem solid #ddd",
          });
          $(this)
            .find(".menu-btn")
            .css(
              "background",
              "url(img/arrow__bottom-bk.png) no-repeat center"
            );
          $(this).next(".menu-body").slideUp();
        });
    }

    $(".menu-body:not(.depth-0-body)").slideUp();
    $('.menu-head input[type="checkbox"]').on("click", function (e) {
      e.stopPropagation();
    });
  </script>
</html>
